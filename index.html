<header class="container text-center py-5">
  <h1 class="display-4 fw-bold">Sankhadip Saha</h1>
  <div id="typing-text">
    <span id="typed-line"></span><span class="typing-cursor"></span>
  </div>
  <p>Crafting Matter | Enabling Energy | Exploring Structure</p>
  <a href="cv.html" class="btn btn-primary">View My CV</a>
</header>

<style>
  #typed-line {
    border-bottom: 2px solid #4169E1; /* underline only here */
    display: inline-block;
    padding-bottom: 4px;
    animation: underline-grow 0.5s ease forwards;
    width: 0;
    overflow: hidden;
    white-space: nowrap;
  }

  @keyframes underline-grow {
    to {
      width: 100%;
    }
  }

  .typing-cursor {
    display: inline-block;
    border-right: 3px solid #4169E1;
    animation: blink 0.8s steps(2, start) infinite;
    vertical-align: bottom;
    margin-left: 2px;
  }

  @keyframes blink {
    to {
      border-color: transparent;
    }
  }
</style>

<script>
  const lines = [
    "PhD Researcher",
    "Materials Scientist",
    "Energy Storage Enthusiast",
    "Operando Techniques Explorer"
  ];

  const typedLine = document.getElementById('typed-line');
  const typingSpeed = 100; // ms per character
  const erasingSpeed = 50; // ms per character
  const delayBetweenLines = 1500; // pause before erase

  let lineIndex = 0;
  let charIndex = 0;

  function typeLine() {
    if (charIndex < lines[lineIndex].length) {
      typedLine.textContent += lines[lineIndex].charAt(charIndex);
      charIndex++;
      setTimeout(typeLine, typingSpeed);
    } else {
      typedLine.style.animation = 'none'; // reset underline animation
      typedLine.offsetHeight; // trigger reflow
      typedLine.style.animation = null;

      setTimeout(eraseLine, delayBetweenLines);
    }
  }

  function eraseLine() {
    if (charIndex > 0) {
      typedLine.textContent = lines[lineIndex].substring(0, charIndex - 1);
      charIndex--;
      setTimeout(eraseLine, erasingSpeed);
    } else {
      lineIndex = (lineIndex + 1) % lines.length;
      setTimeout(typeLine, typingSpeed);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    typeLine();
  });
</script>
